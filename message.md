## Hrt 数据传输协议

Hrt 使用文本协议传输数据（`data` 消息除外），这意味着可以用 telnet 等工具直接调试 hrt，或是自己实现 hrt agent（当然您不需要这么做, 本文档的主要目的不过是保留我的设计思路）。

### 简单文本消息

简单文本消息是一行由 `+` 开头，内部不换行的字符串：
```text
'+' content LF
```

目前仅使用内容为 "ok" 的简单文本消息作为 broker 认可 agent 认证信息的响应。

### 错误消息

错误消息是一行由 `-` 开头，内部不换行的字符串：
```text
'-' content LF
```

目前由 broker 发送，用来告知 agent 认证失败的原因。

### 认证消息

认证消息由多行 key ':' value 格式的字符串组成，由一个空行结束：
```text
*(key ':' value LF)
LF
```
Value 可由除换行符外的任何字符组成，key 除了不能包含冒号（':'）且不能为空外，和 value 的规则相同。从行首开始到该行的第一个冒号为止为 key ，该行其余部分（除了冒号）为 value 。

Agent 应在成功建立与 broker 的连接之后10秒内发送认证消息。若10秒后 agent 仍然未发送任何消息或发送了其他类型的消息，broker 将直接关闭与 agent 的连接而不提供任何提示信息。
